/* global $ */$(document).ready(function(){function e(){"use strict";var e=$("#api-call :input"),t={};$.each($("#api-call").serializeArray(),function(e,n){t[n.name]=n.value});return t}function t(e){"use strict";e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),r=n.exec(window.location.search);return r===null?"":decodeURIComponent(r[1].replace(/\+/g," "))}function n(){"use strict";var e=t("access_token");$("#access").text(e).attr("data-refresh",t("refresh_token"))}function r(){"use strict";$("#submit").button("loading");var t=e(),n="https://api.box.com/2.0/",r=ace.edit("json_ace"),i=r.getValue();$.ajax({type:t.method,url:n+t.url,data:i,dataType:"json",headers:{Authorization:"Bearer "+$("#access").text()},cache:!1}).done(function(e,t,n){if(n.responseText!=="")var r=JSON.stringify($.parseJSON(n.responseText),null,"	");else var r="Empty Response";$("#response").text(r);$("#response_headers").text(n.getAllResponseHeaders());prettyPrint();$("#http-cat").attr("src","http://httpcats.herokuapp.com/"+n.status)}).fail(function(e,t,n){n===""&&alert("GOT YA !")}).always(function(){$("#submit").button("reset")})}function i(e){var t=ace.edit("json_ace");$(e).css("visibility","hidden");t.renderer.setShowGutter(!1);t.setPrintMarginColumn(!1);t.getSession().setMode("ace/mode/json")}$("#url").typeahead({source:["folders","files","collaborations","discussions","comments","events","users","search","shared_items","folders/ID","files/ID","collaborations/ID","discussions/ID","comments/ID","users/ID","folders/ID/items","folders/trash/items","users/me","folders/ID/collaborations","/files/ID/versions"]});i("#json_body");n();$("#api-call").submit(function(e){e.preventDefault();r();return!1});$("#top-link").topLink({min:400,fadeSpeed:500});$("#top-link").click(function(e){e.preventDefault();$.scrollTo(0,300)})});$(document).delegate("#json_body","keydown",function(e){var t=e.keyCode||e.which;if(t===9){e.preventDefault();var n=$(this).get(0).selectionStart,r=$(this).get(0).selectionEnd;$(this).val($(this).val().substring(0,n)+"	"+$(this).val().substring(r));$(this).get(0).selectionStart=$(this).get(0).selectionEnd=n+1}});$.fn.topLink=function(e){e=$.extend({min:1,fadeSpeed:200,ieOffset:50},e);return this.each(function(){var t=$(this);t.css("display","none");$(window).scroll(function(){$.support.hrefNormalized||t.css({position:"absolute",top:$(window).scrollTop()+$(window).height()-e.ieOffset});$(window).scrollTop()>=e.min?t.fadeIn(e.fadeSpeed):t.fadeOut(e.fadeSpeed)})})};